overwrite: true
watch: false
schema:
    - schema.graphql
documents: ["src/**/*.{ts,tsx}"]
hooks:
    afterAllFileWrite:
        - prettier --write
generates:
    # Get schemas from server
    src/graphql/schemas.ts:
        plugins:
            - typescript

    # Create operations based on queries
    src/graphql/operations.ts:
        preset: import-types
        presetConfig:
            typesPath: ./schemas
        plugins:
            - typescript-operations
        config:
            flattenGeneratedTypes: true

    # Create hooks based on queries
    src/graphql/hooks.ts:
        preset: import-types
        presetConfig:
            typesPath: ./operations
        plugins:
            - typescript-react-apollo
        config:
            withHooks: true
            withHOC: false
            withComponent: false
            flattenGeneratedTypes: true
            withRefetchFn: true

    # Create fragments based on queries
    src/graphql/fragments.json:
        plugins:
            - fragment-matcher
        config:
            apolloClientVersion: 3
            minify: false

    # Create policy types based on queries
    src/graphql/type-policies.ts:
        plugins:
            - typescript-apollo-client-helpers

    # Get schema in graphql Format
    src/graphql/schema.graphql:
        plugins:
            - schema-ast
        config:
            includeDirectives: true
            flattenGeneratedTypes: true
